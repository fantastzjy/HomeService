<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<html lang="en">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title></title>
    <link rel="stylesheet" href="/resource/common/layui/css/layui.css" media="all"/>
</head>
<body style="padding: 20px; background-color: #F2F2F2;">
<div>
    <div class="layui-card">
        <div class="layui-card-header">登录注册参数设置</div>
        <div class="layui-card-body">
            <div class="layui-form">
                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label">登录背景图</label>
                        <div class="layui-input-inline">
                            <input type="text" name="logBackground" id="logBackground"
                                   th:value=${loginReg.logBackground} readonly autocomplete="off"
                                   class="layui-input">
                        </div>
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label">注册背景图</label>
                        <div class="layui-input-inline">
                            <input type="text" name="regBackground" id="regBackground"
                                   th:value="${loginReg.regBackground}" readonly autocomplete="off"
                                   class="layui-input">
                        </div>
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label">注册姓名</label>
                        <div class="layui-input-block">
                            <input type="checkbox" name="isRealName"
                                   th:attr="checked=${loginReg.isRealName eq 'on'?true:false}"
                                   lay-skin="switch"
                                   lay-text="ON|OFF">
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label">注册头像</label>
                        <div class="layui-input-block">
                            <input type="checkbox" name="isImg"
                                   th:attr="checked=${loginReg.isImg eq 'on'?true:false}" lay-skin="switch"
                                   lay-text="ON|OFF">
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label">注册性别</label>
                        <div class="layui-input-block">
                            <input type="checkbox" name="isSex"
                                   th:attr="checked=${loginReg.isSex eq 'on'?true:false}" lay-skin="switch"
                                   lay-text="ON|OFF">
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label">注册邮箱</label>
                        <div class="layui-input-block">
                            <input type="checkbox" name="isEmail"
                                   th:attr="checked=${loginReg.isEmail eq 'on'?true:false}" lay-skin="switch"
                                   lay-text="ON|OFF">
                        </div>
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label">注册地址</label>
                        <div class="layui-input-block">
                            <input type="checkbox" name="isAddress"
                                   th:attr="checked=${loginReg.isAddress eq 'on'?true:false}" lay-skin="switch"
                                   lay-text="ON|OFF">
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label">注册身份证</label>
                        <div class="layui-input-block">
                            <input type="checkbox" name="isIdCard"
                                   th:attr="checked=${loginReg.isIdCard eq 'on'?true:false}" lay-skin="switch"
                                   lay-text="ON|OFF">
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label">注册手机号</label>
                        <div class="layui-input-block">
                            <input type="checkbox" name="isPhone"
                                   th:attr="checked=${loginReg.isPhone eq 'on'?true:false}" lay-skin="switch"
                                   lay-text="ON|OFF">
                        </div>
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <input th:value="${loginReg.id}" name="id" hidden=""/>
                        <button type="submit" class="layui-btn" lay-submit="" lay-filter="demo1">立即提交</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="/resource/common/layui/layui.js"></script>
<script type="text/javascript">


    layui.use(['layer', 'layedit', 'form', 'upload',], function () {
        var table = layui.table,
            $ = layui.$,
            layer = layui.layer,
            upload = layui.upload,
            layedit = layui.layedit,
            form = layui.form;
        upload.render({
            elem: '#logBackground'
            , url: '/upload.do'
            , done: function (res) {
                console.log(res)
                //如果上传失败
                if (!res.status) {
                    return layer.msg('上传失败');
                }
                $("#logBackground").val(res.obje);
                return layer.msg('上传成功');
            }
            , error: function () {
                return layer.msg('上传失败');
            }
        });
        upload.render({
            elem: '#regBackground'
            , url: '/upload.do'
            , done: function (res) {
                console.log(res)
                //如果上传失败
                if (!res.status) {
                    return layer.msg('上传失败');
                }
                $("#regBackground").val(res.obje);
                return layer.msg('上传成功');
            }
            , error: function () {
                return layer.msg('上传失败');
            }
        });
        form.on('submit(demo1)', function (data) {
            $.ajax({
                url: '/wbeSet/loginReg.do',
                type: 'put',
                data: data.field,
                dataType: 'json',
                async: false,
                success: function (result) {
                    if (result.status) {
                        layer.msg("修改成功!")
                    } else {
                        alert("修改失败!")
                    }
                }

            });
        });
    });

</script>
</body>
</html>
